{% extends 'quesGens/base.html' %}
{% load static %}
{% block content %}
<main>
        <div class="container">
            <div class="header">
                <h2>MCQ Generator</h2>
               
                {% if user.is_authenticated %}
                <br>
                <br>
                <div class="dropdown">
                <div style=" line-height: 54px; height: 50px;"><a href="#"><img onclick="toggleDropdown()" style="width: 50px; height: 50px; margin-left:50px;" class="rounded-circle account-img" src="{{ user.profile.image.url }}"></a>
                </div>
                <div id="dropdownMenu" class="dropdown-menu">
                    <a href="#" class="dropdown-item" onclick="downloadFile('txt')"><i class="fa-solid fa-right-to-bracket"></i>   Login/Signup</a>
                    <hr>
                    <a href="#" class="dropdown-item" onclick="downloadPDF()"><i class="fa-solid fa-globe"></i>   English</a>
                    <a href="#" class="dropdown-item" onclick="downloadFile('word')"><i class="fa-solid fa-toggle-on"></i>   Dark mode</a>
                    <a href="#" class="dropdown-item" onclick="downloadFile('word')"><i class="fas fa-file-word"></i>   Help Center</a>
                    <a href="#" class="dropdown-item" onclick="downloadFile('word')"><i class="fa-solid fa-address-card"></i>   Contact us</a>

                </div>
            </div>
                {% else %}
                <button id="loginBtn" class="login-btn">Login</button>
                {% endif %}
            </div>

            <h2>Enter Text and Number of Keywords to Generate MCQs</h2>
<br><br>
<form method="post">
    {% csrf_token %}
    <div class="form-group" style="position: relative;">
        <label for="context">Context</label>
        <!-- The textarea -->
        <textarea id="context" name="context" rows="4" style="width: 100%; padding: 10px;"></textarea>

        <div class="buttons-container" style="position: absolute; top: 70px; right: 10px;">
            <button style="font-size:17px; font-weight: bold; background-color:white; color:green; border-radius: 20px; border: 1px solid green;" type="button"><i class="fa-regular fa-file-lines"></i> Try Sample Text</button>
            <button style="font-size:17px; font-weight: bold; background-color:white; color:green; border-radius: 20px; border: 1px solid green" type="button"> <i class="fa-regular fa-paste"></i> Paste Text</button>
        </div>
        <div class="filo">
            <input type="file" id="pdf_file" name="pdf_file" class="file-input" />
            <label for="pdf_file" class="file-input-label"><i class="fa-solid fa-cloud-arrow-up"></i> Upload pdf</label>
            </div>
    </div>
<br>
    {{ form.num_keywords.label_tag }}
    {{ form.num_keywords }}
    {{ form.num_keywords.help_text }}


    <div>
        {{ form.option_1.label_tag }}
        {{ form.option_1 }}
    </div>

    <div>
        {{ form.option_2.label_tag }}
        {{ form.option_2 }}
    </div>

    <div>
        {{ form.option_3.label_tag }}
        {{ form.option_3 }}
    </div>

 <button type="submit" id="generateBtn">
        <span class="btn-text">Generate MCQs</span>
        <span class="loading-icon" style="display: none;">
            <i class="fa fa-spinner fa-spin"></i>
        </span>
    </button>
  
</form>
            <!-- Modal -->
            <div id="loginModal" class="modal">
                <div class="modal-content">
                    <span class="close-btn">&times;</span>
                    <div class="tab">
                        <button class="tablinks active" onclick="openTab(event, 'Login')">Login</button>
                        <button class="tablinks" onclick="openTab(event, 'Register')">Register</button>
                    </div>

                    <!-- Login Form -->
                    <div id="Login" class="tabcontent" style="display: block;">
                        <form id="Loginform" action="{% url 'login' %}" method="POST">

                            <!-- <input type="hidden" name="csrfmiddlewaretoken" value="{{ csrf_token }}"> -->

                            <!-- <input type="hidden" name="next" value="{{ request.path }}">  -->
                            <label for="login-email">Email:</label>
                            <input type="email" id="login-email" name="email" required>

                            <label for="login-password">Password:</label>
                            <input type="password" id="login-password" name="password" required>

                            <button type="submit" class="submit-btn">Login</button>
                        </form>
                          <button class="google-btn">
                            <img src="{% static 'img/search.png' %}" alt="Google logo">
                            Sign in with Google
                        </button>
                    </div>

                    <!-- Register Form -->
                    <div id="Register" class="tabcontent">
                        <form id="Registerform" action="{% url 'register' %}" method="POST">

                            <label for="register-email">Email:</label>
                            <input type="email" id="register-email" name="email" required>

                            <label for="register-password">Password:</label>
                            <input type="password" id="register-password" name="password" required>

                            <label for="register-confirm-password">Confirm Password:</label>
                            <input type="password" id="register-confirm-password" name="confirm_password" required>

                            <button type="submit" class="submit-btn1">Register</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
</main>

<script>
    const loginUrl = "{% url 'login' %}";
    const registerUrl = "{% url 'register' %}";
</script>
<script src="{% static 'js/index.js' %}" defer></script>
<script>
    const generateBtn = document.getElementById("generateBtn");
    generateBtn.addEventListener("click", function () {
        // Show the loading icon and hide the text
        generateBtn.querySelector(".btn-text").style.display = "none";
        generateBtn.querySelector(".loading-icon").style.display = "inline-block";
    });
    function toggleDropdown() {
        const dropdownMenu = document.getElementById("dropdownMenu");
        dropdownMenu.style.display = dropdownMenu.style.display === "block" ? "none" : "block";
    }
</script>
</body>
</html>
{% endblock %}
