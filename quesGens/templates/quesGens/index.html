{% extends 'quesGens/base.html' %}
{% load static %}
{% block content %}
<main>
        <div class="container">
            <div class="header">
                <h2>MCQ Generator</h2>
               
                {% if user.is_authenticated %}
                <div style=" line-height: 54px; height: 50px;"><a href="{% url 'profile' %}"><img style="width: 50px; height: 50px; margin-left:50px;" class="rounded-circle account-img" src="{{ user.profile.image.url }}"></a>
                </div>
                {% else %}
                <button id="loginBtn" class="login-btn">Login</button>
                {% endif %}
            </div>

            <h2>Enter Text and Number of Keywords to Generate MCQs</h2>
<br><br>
<form method="post">
    {% csrf_token %}
    {{ form.as_p }}  <!-- This renders the form fields including num_keywords -->
    <button type="submit" id="generateBtn">
        <span class="btn-text">Generate MCQs</span>
        <span class="loading-icon" style="display: none;">
            <i class="fa fa-spinner fa-spin"></i>
        </span>
    </button>
  
</form>
            <!-- Modal -->
            <div id="loginModal" class="modal">
                <div class="modal-content">
                    <span class="close-btn">&times;</span>
                    <div class="tab">
                        <button class="tablinks active" onclick="openTab(event, 'Login')">Login</button>
                        <button class="tablinks" onclick="openTab(event, 'Register')">Register</button>
                    </div>

                    <!-- Login Form -->
                    <div id="Login" class="tabcontent" style="display: block;">
                        <form id="Loginform" action="{% url 'login' %}" method="POST">

                            <!-- <input type="hidden" name="csrfmiddlewaretoken" value="{{ csrf_token }}"> -->

                            <!-- <input type="hidden" name="next" value="{{ request.path }}">  -->
                            <label for="login-email">Email:</label>
                            <input type="email" id="login-email" name="email" required>

                            <label for="login-password">Password:</label>
                            <input type="password" id="login-password" name="password" required>

                            <button type="submit" class="submit-btn">Login</button>
                        </form>
                          <button class="google-btn">
                            <img src="{% static 'img/search.png' %}" alt="Google logo">
                            Sign in with Google
                        </button>
                    </div>

                    <!-- Register Form -->
                    <div id="Register" class="tabcontent">
                        <form id="Registerform" action="{% url 'register' %}" method="POST">

                            <label for="register-email">Email:</label>
                            <input type="email" id="register-email" name="email" required>

                            <label for="register-password">Password:</label>
                            <input type="password" id="register-password" name="password" required>

                            <label for="register-confirm-password">Confirm Password:</label>
                            <input type="password" id="register-confirm-password" name="confirm_password" required>

                            <button type="submit" class="submit-btn1">Register</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
</main>

<script>
    const loginUrl = "{% url 'login' %}";
    const registerUrl = "{% url 'register' %}";
</script>
<script src="{% static 'js/index.js' %}" defer></script>
<script>
    const generateBtn = document.getElementById("generateBtn");
    generateBtn.addEventListener("click", function () {
        // Show the loading icon and hide the text
        generateBtn.querySelector(".btn-text").style.display = "none";
        generateBtn.querySelector(".loading-icon").style.display = "inline-block";
    });
</script>
</body>
</html>
{% endblock %}
